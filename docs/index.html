<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Robbie Voice Agent</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@400;500;600&display=swap"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="app">
      <section class="panel login">
        <div class="panel-header">
          <p class="eyebrow">LiveKit Access</p>
          <h1>Join the room</h1>
          <p class="subtle">Enter your details, then start the voice session.</p>
        </div>

        <form id="login-form" class="login-form" autocomplete="off">
          <label class="field">
            <span>Your name</span>
            <input id="name" type="text" placeholder="Lucas" autocomplete="name" required />
          </label>
          <label class="field">
            <span>Passcode</span>
            <input id="passcode" type="password" placeholder="Shared passcode" required />
          </label>
        </form>

        <div class="login-meta">
          <div class="meta-row">
            <span class="meta-label">Environment</span>
            <button id="env-toggle" type="button" class="chip">
              <span id="env-label">prod</span>
            </button>
          </div>
          <div class="meta-row">
            <span class="meta-label">Room</span>
            <strong id="room">-</strong>
          </div>
          <div class="meta-row">
            <span class="meta-label">Participant</span>
            <strong id="participant">-</strong>
          </div>
        </div>
      </section>

      <section class="panel voice">
        <header class="voice-header">
          <div class="agent-info">
            <div class="orb" id="voice-orb" aria-hidden="true">
              <span class="orb-core"></span>
            </div>
            <div>
              <p class="agent-name">Robbie</p>
              <p class="agent-subtitle">Voice concierge</p>
              <p id="status" class="status-inline">Idle. Ready when you are.</p>
            </div>
          </div>
          <div class="connection-state" id="connection-state">
            <span class="state-dot"></span>
            <span id="state-label">Disconnected</span>
          </div>
        </header>

        <div class="conversation" aria-live="polite">
          <div id="chat-empty" class="empty-state">
            <p>Start speaking to see live transcriptions from you and the agent.</p>
          </div>
          <div id="chat-messages" class="message-list" role="log"></div>
        </div>

        <div class="voice-footer">
          <canvas id="waveform" class="waveform" aria-hidden="true"></canvas>
          <div class="input-row">
            <button id="mic-toggle" class="icon-button" type="button" aria-pressed="false">
              <span class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
                  <path d="M12 4a3 3 0 0 1 3 3v5a3 3 0 0 1-6 0V7a3 3 0 0 1 3-3Z" />
                  <path d="M19 11a7 7 0 0 1-14 0" />
                  <path d="M12 18v2" />
                  <path d="M8 20h8" />
                </svg>
              </span>
            </button>
            <button id="keyboard-toggle" class="icon-button" type="button" aria-pressed="false">
              <span class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
                  <rect x="3" y="6" width="18" height="12" rx="2" />
                  <path d="M7 10h2" />
                  <path d="M11 10h2" />
                  <path d="M15 10h2" />
                  <path d="M7 14h10" />
                </svg>
              </span>
            </button>
            <div class="text-input" id="text-input">
              <textarea
                id="chat-input"
                rows="1"
                placeholder="Type to send a message..."
                aria-label="Send a message"
              ></textarea>
              <button id="chat-send" type="button" class="send-button">Send</button>
            </div>
            <button id="call-toggle" class="call-button" type="button">
              <span id="call-label">Start</span>
              <span class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                  <path d="M4 5.5c0-1.1.9-2 2-2h2.2c.8 0 1.5.5 1.8 1.2l.8 2a2 2 0 0 1-.5 2.2l-1.3 1.3a12.5 12.5 0 0 0 5.6 5.6l1.3-1.3a2 2 0 0 1 2.2-.5l2 .8c.7.3 1.2 1 1.2 1.8V18c0 1.1-.9 2-2 2H18c-7.7 0-14-6.3-14-14Z" />
                </svg>
              </span>
            </button>
          </div>
        </div>
      </section>
    </main>

    <script src="https://unpkg.com/livekit-client/dist/livekit-client.umd.js"></script>
    <script src="app.js"></script>
  </body>
</html>
